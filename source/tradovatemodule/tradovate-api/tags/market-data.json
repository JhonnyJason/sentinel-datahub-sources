{
    "name": "Market Data",
    "description": "# Accessing Market Data\nThe Tradovate Market Data API provides a way to access market data such as quotes, DOM, charts and histograms.\nThe API uses JSON format for request bodies and response data. The exchange of requests and responses are transmitted via the \n[Tradovate WebSocket protocol](/#tag/WebSockets). We have example projects available in both [C#](https://github.com/tradovate/example-api-csharp-trading) \nand [JavaScript](https://github.com/tradovate/example-api-js/tree/main/tutorial/WebSockets/EX-08-Realtime-Market-Data). \n\nIn a typical scenario using the Market Data API consists of the following steps:\n\n## 1. Acquire An Access Token Using Credentials\nClient uses the standard [Access](/#tag/Access) procedure to acquire an Access Token.\n\n## 2. Open a WebSocket and Get Authorized\nClient opens a WebSocket connection and sends their access token using the authorization procedure noted in the [WebSockets section](/#tag/WebSockets).\n\n## 3. Build a Request\nRequest parameters are an object in JSON format. Each request for real-time data requires a `symbol` parameter that specifies the contract for which \nmarket data is requested. Contract can be specified either by the contract symbol string or by the contract ID integer:\n\n```js\n{\n    \"symbol\":\"ESM7\" // Contract is specified by contract symbol\n    ...\n}\n// or\n{\n    \"symbol\":123456 // Contract is specified by contract ID\n    ...\n}\n```\n\nRequests may have additional parameters, which are described in the corresponding sections.\n\n## 4. Subscribe to Real-Time Data\nThe client sends the request parameters via WebSocket message to the server, specifying an endpoint such as `md/subscribeQuote`. The server sends back a \n[response message](/#tag/WebSockets#response-message):\n\n- If a response has an error, client can perform [error handling](/#tag/Conventions#error-handling).\n\n- If a response is successful, the corresponding subscription is activated. The client will begin to receive market data. In order to properly \nunsubscribe from market data, the client is responsible for keeping track of the contracts for which subscriptions are activated. A client can have\na single subscription of each type (quotes, DOM, or charts) per contract.\n\n# Handling Market Data\nMarket data arrives from the Tradovate server to the client asynchronously as [event messages](/#tag/Conventions#event-message) of `md` or `chart` types, for example:\n\n  ```js\n  {\n    \"e\":\"md\",\n    \"d\": {\n      \"quotes\": [\n        {\n          \"timestamp\":\"2021-04-13T04:59:06.588Z\",\n          \"contractId\":123456,\n          \"entries\": {\n            \"Bid\": { \"price\":18405.123, \"size\":7.123 },\n            \"TotalTradeVolume\": { \"size\":4118.123 },\n            \"Offer\": { \"price\":18410.012, \"size\":12.35 },\n            \"LowPrice\": { \"price\":18355.23 },\n            \"Trade\": { \"price\":18405.023, \"size\":2.10 },\n            \"OpenInterest\": { \"size\":40702.024 },\n            \"OpeningPrice\": { \"price\":18515.123 },\n            \"HighPrice\": { \"price\":18520.125 },\n            \"SettlementPrice\": { \"price\":18520.257 }\n          }\n        }\n      ]\n    }\n  }\n  ```\n\n# Unsubscribing From Market Data\nMirroring the process for market data subscription, the client creates request parameters, specifies request endpoint such as `md/unsubscribeQuote` and\nsends the request to the Tradovate server. If the request is successful, the server will deactivate your subscription and the client will stop receiving real-time data.\n\n# Request Reference\n\n## Subscribe Quote\n\n**Endpoint**: `md/subscribeQuote`\n\n**Parameters**:\n\n```js\n{ \"symbol\": \"ESM7\" | 123456 }\n```\n\n**Data message**\n\n```js\n{\n  \"e\":\"md\",\n  \"d\": {\n    \"quotes\": [ // \"quotes\" may contain multiple quote objects\n      {\n        \"timestamp\":\"2021-04-13T04:59:06.588Z\",\n        \"contractId\":123456,\n        \"entries\": {\n            \"Bid\": { \"price\":18405.123, \"size\":7.123 },\n            \"TotalTradeVolume\": { \"size\":4118.123 },\n            \"Offer\": { \"price\":18410.012, \"size\":12.35 },\n            \"LowPrice\": { \"price\":18355.23 },\n            \"Trade\": { \"price\":18405.023, \"size\":2.10 },\n            \"OpenInterest\": { \"size\":40702.024 },\n            \"OpeningPrice\": { \"price\":18515.123 },\n            \"HighPrice\": { \"price\":18520.125 },\n            \"SettlementPrice\": { \"price\":18520.257 }\n          }\n        }\n      }\n    ]\n  }\n}\n```\n\n## Unsubscribe Quote\n\n**Endpoint**: `md/unsubscribeQuote`\n\n**Parameters**:\n\n```js\n{ \"symbol\": \"ESM7\" | 123456 }\n```\n\n\n## Subscribe DOM\n\n**Endpoint**: `md/subscribeDOM`\n\n**Parameters**:\n\n```js\n{ \"symbol\": \"ESM7\" | 123456 }\n```\n\n**Data message**\n\n```js\n{\n  \"e\":\"md\",\n  \"d\": {\n    \"doms\": [ // \"doms\" may contain multiple DOM objects\n      {\n        \"contractId\":123456, // ID of the DOM contract\n        \"timestamp\":\"2021-04-13T11:33:57.488Z\",\n        \"bids\": [ // Actual depth of \"bids\" may varies depending on available data\n          {\"price\":2335.25,\"size\":33.54},\n          ...\n          {\"price\":2333,\"size\":758.21}\n        ],\n        \"offers\": [ // Actual depth of \"offers\" may varies depending on available data\n          {\"price\":2335.5,\"size\":255.12},\n          ...\n          {\"price\":2337.75,\"size\":466.64}\n        ]\n      }\n    ]\n  }\n}\n```\n\n\n## Unsubscribe DOM\n\n**Endpoint**: `md/unsubscribeDOM`\n\n**Parameters**:\n\n```js\n{ \"symbol\": \"ESM7\" | 123456 }\n```\n\n\n## Subscribe Histogram\n\n**Endpoint**: `md/subscribeHistogram`\n\n**Parameters**:\n\n```js\n{ \"symbol\": \"ESM7\" | 123456 }\n```\n\n**Data message**\n\n```js\n{\n  \"e\":\"md\",\n  \"d\": {\n    \"histograms\": [ // \"histograms\" may contain multiple histogram objects\n      {\n        \"contractId\":123456, // ID of the histogram contract\n        \"timestamp\":\"2017-04-13T11:33:57.412Z\",\n        \"tradeDate\": {\n          \"year\":2022,\n          \"month\":4,\n          \"day\":13\n        },\n        \"base\":2338.75,\n        \"items\": { // Actual number of histogram items may depend on data\n          \"-14\":5906.67,\n          ...\n          \"2\":1234.55,\n        },\n        \"refresh\":false\n      }\n    ]\n  }\n}\n```\n\n\n## Unsubscribe Histogram\n\n**Endpoint**: `md/unsubscribeHistogram`\n\n**Parameters**:\n\n```js\n{ \"symbol\": \"ESM7\" | 123456 }\n```\n\n\n\n## Get Chart\n\n**Description**: Client may have multiple charts for the same contract, so the response for `md/getChart` request contains a subscription ID to properly track and unsubscribe from a real-time chart subscription. If you're using JavaScript, don't forget to check the [section on charts](https://github.com/tradovate/example-api-js/tree/main/tutorial/WebSockets/EX-10-Chart-Data) in our API's [comprehensive JavaScript tutorial](https://github.com/tradovate/example-api-js).\n\n**Endpoint**: `md/getChart`\n\n**Parameters**:\n\n```js\n{\n  \"symbol\":\"ESM7\" | 123456,\n  \"chartDescription\": {\n    \"underlyingType\":\"MinuteBar\", // Available values: Tick, DailyBar, MinuteBar, Custom, DOM\n    \"elementSize\":15,\n    \"elementSizeUnit\":\"UnderlyingUnits\", // Available values: Volume, Range, UnderlyingUnits, Renko, MomentumRange, PointAndFigure, OFARange\n    \"withHistogram\": true | false\n  },\n  \"timeRange\": {\n    // All fields in \"timeRange\" are optional, but at least anyone is required\n    \"closestTimestamp\":\"2017-04-13T11:33Z\",\n    \"closestTickId\":123,\n    \"asFarAsTimestamp\":\"2017-04-13T11:33Z\",\n    \"asMuchAsElements\":66\n  },\n}\n```\n\n**Response**\n\nA response for `md/getChart` request contains two subscription ID, `historicalId` and `realtimeId`. Client needs to store `realtimeId` value to properly cancel real-time chart subscription via `md/cancelChart` request.\n\n```js\n{\n  \"s\":200,\n  \"i\":13,\n  \"d\":{\n    \"historicalId\":32,\n    \"realtimeId\":31\n  }\n}\n```\n\n**Data message**\n\n```js\n{\n  \"e\":\"chart\",\n  \"d\": {\n    \"charts\": [ // \"charts\" may contain multiple chart objects\n      {\n        \"id\":9, // \"id\" matches either historicalId or realtimeId values from response\n        \"td\":20170413, // Trade date as a number with value YYYYMMDD\n        \"bars\": [ // \"bars\" may contain multiple bar objects\n          {\n            \"timestamp\":\"2017-04-13T11:00:00.000Z\",\n            \"open\":2334.25,\n            \"high\":2334.5,\n            \"low\":2333,\n            \"close\":2333.75,\n            \"upVolume\":4712.234,\n            \"downVolume\":201.124,\n            \"upTicks\":1333.567,\n            \"downTicks\":82.890,\n            \"bidVolume\":2857.123,\n            \"offerVolume\":2056.224\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n## Cancel Chart\n\n**Endpoint**: `md/cancelChart`\n\n**Parameters**:\n\n```js\n{\n  \"subscriptionId\": 123456 // The value of historical chart subscription ID from `md/getChart` response\n}\n```\n"
}